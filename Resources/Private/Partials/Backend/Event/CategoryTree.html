{namespace se=Slub\SlubEvents\ViewHelpers}
<f:section name="categoryTree">
	<ul class="category_tree">
		<f:for each="{categories}" key="id" as="category">
			<li>
				<f:form.checkbox id="category-{category.item.uid}"
								name="searchParameter[category][{id}]"
								value="{category.item.uid}"
								checked="{se:condition.inArray(array: '{categoriesSelected}', value: '{category.item.uid}')}"
								onclick="checkBoxes(this)"/>
				<label for="category-{category.item.uid}" title="{category.item.uid}">{category.item.title}</label>

				<f:if condition="{category.children}">
					<f:render section="categoryTree"
							  arguments="{categories: category.children, categoriesSelected: categoriesSelected}"/>
				</f:if>
			</li>
		</f:for>
	</ul>
</f:section>
